<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="suho/css/챗봇.css">
    <title>chatbot5</title>
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
</head>
<body>
<div id="chat-container"></div>
<script>
    $(function () {
        const chatContainer = $('#chat-container');
        let CATEGORY_STATUS = 1;
        let selectedGender = '';
        let selectedShoeType = '';

        function appendMessage(sender, message) {
            const messageElement = $('<div></div>').html(`<strong>${sender}:</strong>${message}`);
            chatContainer.append(messageElement);
            chatContainer.scrollTop(chatContainer.prop('scrollHeight'));
        }

        function 환영인사() {
            appendMessage('chatbot', '<br>신발 전문 쇼핑몰 SHOES LAB에 오신 것을 환영합니다 💖💖' +
                '<br>문의하실 내용을 위해 아래 항목 중 입력해주세요 :)');
            showButtons(['남성용', '여성용', '키즈용']);
        }

        function sendMessage(userMessage) {
            appendMessage('User', userMessage);

            if (CATEGORY_STATUS === 1) {
                if (userMessage.toLowerCase().includes('남성용')) {
                    selectedGender = '남성용';
                    showSubCategories(['스니커즈', '축구화', '런닝화', '슬리퍼', '등산화', '슬립온']);
                    CATEGORY_STATUS = 2;
                } else if (userMessage.toLowerCase().includes('여성용')) {
                    selectedGender = '여성용';
                    showSubCategories(['스니커즈', '런닝화', '슬리퍼', '부츠', '하이킹부츠', '슬립온']);
                    CATEGORY_STATUS = 2;
                } else if (userMessage.toLowerCase().includes('키즈용')) {
                    selectedGender = '키즈용';
                    showSubCategories(['스니커즈', '축구화', '런닝화', '슬리퍼', '슬립온']);
                    CATEGORY_STATUS = 2;
                } else {
                    setTimeout(function () {
                        appendMessage('chatbot', '죄송합니다. 입력하신 정보로는 처리할 수 없습니다😥');
                    }, 500);
                }
            } else if (CATEGORY_STATUS === 2) {
                if (selectedGender === '남성용')
                    if (userMessage.toLowerCase().includes('스니커즈')) {
                        selectedShoeType = '스니커즈';
                        showSubCategories2(['']);
                        CATEGORY_STATUS = 3;
                    } else if (userMessage.toLowerCase().includes('축구화')) {
                        selectedShoeType = '축구화';
                        showSubCategories2(['']);
                        CATEGORY_STATUS = 3;
                    } else if (userMessage.toLowerCase().includes('런닝화')) {
                        selectedShoeType = '런닝화';
                        showSubCategories2(['']);
                        CATEGORY_STATUS = 3;
                    } else if ( userMessage.toLowerCase().includes('슬리퍼')) {
                        selectedShoeType = '슬리퍼';
                        showSubCategories2(['']);
                        CATEGORY_STATUS = 3;
                    } else if (userMessage.toLowerCase().includes('등산화')) {
                        selectedShoeType = '등산화';
                        showSubCategories2(['']);
                        CATEGORY_STATUS = 3;
                    } else if (userMessage.toLowerCase().includes('슬립온')) {
                        selectedShoeType = '슬립온';
                        showSubCategories2(['']);
                        CATEGORY_STATUS = 3;
                    } else {
                        setTimeout(function () {
                            appendMessage('chatbot', '죄송합니다. 입력하신 정보로는 처리할 수 없습니다😥');
                        }, 500);
                    }
            } else if (CATEGORY_STATUS === 2) {
                if (selectedGender === '여성용')
                if (userMessage.toLowerCase().includes('스니커즈')) {
                    selectedShoeType = '스니커즈';
                    showSubCategories2(['']);
                    CATEGORY_STATUS = 3;
                } else if (userMessage.toLowerCase().includes('런닝화')) {
                    selectedShoeType = '런닝화';
                    showSubCategories2(['']);
                    CATEGORY_STATUS = 3;
                } else if (userMessage.toLowerCase().includes('슬리퍼')) {
                    selectedShoeType = '슬리퍼';
                    showSubCategories2(['']);
                    CATEGORY_STATUS = 3;
                } else if (userMessage.toLowerCase().includes('부츠')) {
                    selectedShoeType = '부츠';
                    showSubCategories2(['']);
                    CATEGORY_STATUS = 3;
                } else if (userMessage.toLowerCase().includes('하이킹부츠')) {
                    selectedShoeType = '하이킹부츠';
                    showSubCategories2(['']);
                    CATEGORY_STATUS = 3;
                } else if (userMessage.toLowerCase().includes('슬립온')) {
                    selectedShoeType = '슬립온';
                    showSubCategories2(['']);
                    CATEGORY_STATUS = 3;
                } else {
                    setTimeout(function () {
                        appendMessage('chatbot', '죄송합니다. 입력하신 정보로는 처리할 수 없습니다😥');
                    }, 500);
                }
            } else if (CATEGORY_STATUS === 2) {
                if (selectedGender === '키즈용')
                if (userMessage.toLowerCase().includes('스니커즈')) {
                    selectedShoeType = '스니커즈';
                    showSubCategories2(['']);
                    CATEGORY_STATUS = 3;
                } else if (userMessage.toLowerCase().includes('축구화')) {
                    selectedShoeType = '축구화';
                    showSubCategories2(['']);
                    CATEGORY_STATUS = 3;
                } else if (userMessage.toLowerCase().includes('런닝화')) {
                    selectedShoeType = '런닝화';
                    showSubCategories2(['']);
                    CATEGORY_STATUS = 3;
                } else if (userMessage.toLowerCase().includes('슬리퍼')) {
                    selectedShoeType = '슬리퍼';
                    showSubCategories2(['']);
                    CATEGORY_STATUS = 3;
                } else if (userMessage.toLowerCase().includes('슬리퍼')) {
                    selectedShoeType = '슬리퍼';
                    showSubCategories2(['']);
                    CATEGORY_STATUS = 3;

                } else {
                    setTimeout(function () {
                        appendMessage('chatbot', '죄송합니다. 입력하신 정보로는 처리할 수 없습니다😥');
                    }, 500);
                }
            } else {
                setTimeout(function () {
                    appendMessage('chatbot', '죄송합니다. 입력하신 정보로는 처리할 수 없습니다😥');
                }, 500);
            }
            userInput.val('');
        }

        function showButtons(buttonTexts) {
            const buttonsContainer = $('<div></div>').addClass('buttons-container');

            buttonTexts.forEach((text) => {
                const button = $('<button></button>').text(text);
                button.click(function () {
                    sendMessage(text);
                });
                buttonsContainer.append(button);
            });

            chatContainer.append(buttonsContainer);
            chatContainer.scrollTop(chatContainer.prop('scrollHeight'));
        }

        function showSubCategories(subCategories) {
            setTimeout(function () {
                appendMessage('<br>chatbot', `<br>선택한 성별: ${selectedGender}`);
                appendMessage('chatbot', '<br>신발 종류를 선택해주세요👟');
                showButtons(subCategories);
                chatContainer.scrollTop(chatContainer.prop('scrollHeight'));
            }, 500);
        }

        function showSubCategories2(subCategories) {
            setTimeout(function () {
                appendMessage('<br>chatbot', `<br>선택한 신발 종류: ${selectedShoeType}`);
                appendMessage('chatbot', '<br>입력하신 신발 정보의 페이지로 안내합니다😊😊');

                let link;
                if (selectedGender === '남성용') {
                    if (selectedShoeType === '스니커즈') {
                        link = $('<a></a>').attr('href', 'seller/men/Sneakers.html').attr('target', '_blank').text('남성용 스니커즈 상세 정보 보러 가기');
                    } else if (selectedShoeType === '축구화') {
                        link = $('<a></a>').attr('href', 'seller/men/Football_shoes.html').attr('target', '_blank').text('남성용 축구화 상세 정보 보러 가기');
                    } else if (selectedShoeType === '런닝화') {
                        link = $('<a></a>').attr('href', 'seller/men/Running_shoes.html').attr('target', '_blank').text('남성용 런닝화 상세 정보 보러 가기');
                    } else if (selectedShoeType === '슬리퍼') {
                        link = $('<a></a>').attr('href', 'seller/men/Sliper.html').attr('target', '_blank').text('남성용 슬리퍼 상세 정보 보러 가기');
                    } else if (selectedShoeType === '등산화') {
                        link = $('<a></a>').attr('href', 'seller/men/Hiking_boots.html').attr('target', '_blank').text('남성용 등산화 상세 정보 보러 가기');
                    } else if (selectedShoeType === '슬립온') {
                        link = $('<a></a>').attr('href', 'seller/men/Slip-on.html').attr('target', '_blank').text('남성용 슬립온 상세 정보 보러 가기');
                    }
                } else if (selectedGender === '여성용') {
                    if (selectedShoeType === '스니커즈') {
                        link = $('<a></a>').attr('href', 'woman_sneakers.html').attr('target', '_blank').text('여성용 스니커즈 상세 정보 보러 가기');
                    } else if (selectedShoeType === '런닝화') {
                        link = $('<a></a>').attr('href', 'woman_running.html').attr('target', '_blank').text('여성용 런닝화 상세 정보 보러 가기');
                    } else if (selectedShoeType === '슬리퍼') {
                        link = $('<a></a>').attr('href', 'woman_running.html').attr('target', '_blank').text('여성용 슬리퍼 상세 정보 보러 가기');
                    } else if (selectedShoeType === '부츠') {
                        link = $('<a></a>').attr('href', 'woman_running.html').attr('target', '_blank').text('여성용 부츠 상세 정보 보러 가기');
                    } else if (selectedShoeType === '하이킹부츠') {
                        link = $('<a></a>').attr('href', 'woman_running.html').attr('target', '_blank').text('여성용 하이킹부츠 상세 정보 보러 가기');
                    } else if (selectedShoeType === '슬립온') {
                        link = $('<a></a>').attr('href', 'woman_running.html').attr('target', '_blank').text('여성용 슬립온 상세 정보 보러 가기');
                    }
                } else if (selectedGender === '키즈용') {
                    if (selectedShoeType === '스니커즈') {
                        link = $('<a></a>').attr('href', 'kids_slippers.html').attr('target', '_blank').text('키즈용 스니커즈 상세 정보 보러 가기');
                    } else if (selectedShoeType === '축구화') {
                        link = $('<a></a>').attr('href', 'kids_hiking.html').attr('target', '_blank').text('키즈용 축구화 상세 정보 보러 가기');
                    } else if (selectedShoeType === '런닝화') {
                        link = $('<a></a>').attr('href', 'kids_hiking.html').attr('target', '_blank').text('키즈용 런닝화 상세 정보 보러 가기');
                    } else if (selectedShoeType === '슬리퍼') {
                        link = $('<a></a>').attr('href', 'kids_hiking.html').attr('target', '_blank').text('키즈용 슬리퍼 상세 정보 보러 가기');
                    } else if (selectedShoeType === '슬립온') {
                        link = $('<a></a>').attr('href', 'kids_hiking.html').attr('target', '_blank').text('키즈용 슬립온 상세 정보 보러 가기');
                    }
                }
                if (!link) {
                    link = $('<a></a>').attr('href', 'default.html').attr('target', '_blank').text('메인 페이지 보러 가기');
                }

                chatContainer.append(link);
                chatContainer.scrollTop(chatContainer.prop('scrollHeight'));
            }, 500);
        }


        환영인사();

        let inputContainer = $('<div id="input-container"></div>').appendTo('body');
        let userInput = $('<input type="text" id="user-input" placeholder="무엇이 궁금한가요?">').appendTo(inputContainer);
        let sendBtn = $('<button id="send-btn">Enter</button>').appendTo(inputContainer);

        sendBtn.click(function () {
            const userMessage = userInput.val();
            sendMessage(userMessage);
        });

        userInput.keypress(function (e) {
            if (e.which === 13) {
                const userMessage = userInput.val();
                sendMessage(userMessage);
            }
        });
    });
</script>
</body>
</html>